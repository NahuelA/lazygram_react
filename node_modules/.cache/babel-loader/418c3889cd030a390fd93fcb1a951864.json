{"ast":null,"code":"var _jsxFileName = \"/home/nahuela/Desktop/projects/lazygram_react/src/components/users/Login.jsx\",\n    _s = $RefreshSig$();\n\n/* Login view from lazygram in react */\nimport { lgApi } from \"../../__modules__\";\nimport \"../../css/users/Login.css\";\nimport React, { useContext, useState } from \"react\";\nimport { addCache } from \"../../utils/users/cache\";\nimport { Link } from \"react-router-dom\";\nimport { Navigate } from \"react-router-dom\";\nimport AuthContext from \"../../context/AuthContext\";\nimport \"../../css/Margin.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  var _errors$, _errors$2, _errors$3, _errors$4, _errors$5;\n\n  const [errors, setErrors] = useState([]);\n  const img = \"http://localhost:8000/media/logo_instagram.png\";\n  const {\n    accessToken,\n    setAccessToken\n  } = useContext(AuthContext);\n\n  const loginSubmit = async e => {\n    e.preventDefault();\n    await lgApi({\n      url: \"accounts/login/\",\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      },\n      data: {\n        username: document.querySelector(\"#validationServer03\").value,\n        password: document.querySelector(\"#validationServer04\").value\n      },\n      withCredentials: true\n    }).then(_ref => {\n      let {\n        data\n      } = _ref;\n      // Set in localStorage the username from authenticated user.\n      addCache(\"access_token\", \"http://localhost:3000/access_token\", data.access);\n      addCache(\"refresh_token\", \"http://localhost:3000/refresh_token\", data.refresh);\n      window.localStorage.setItem(\"profile_auth\", data.username);\n      setAccessToken(data.access);\n    }).catch(err => {\n      setErrors([err.response.data]);\n      e.target[0].classList.add(\"is-invalid\");\n      e.target[1].classList.add(\"is-invalid\");\n    });\n    lgApi(\"https://lazygram-django.vercel.app/\").then(console.log).catch(console.log);\n  };\n\n  return accessToken ? /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"main\", {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"login mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"logo\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: img,\n          alt: \"copygram_logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Lazygram\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container-form\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          method: \"POST\",\n          className: \"needs-validation\",\n          noValidate: true,\n          onSubmit: e => {\n            loginSubmit(e);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container-form\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"validationServer03\",\n              id: \"labels-login-username\",\n              children: [\"Username\", (_errors$ = errors[0]) === null || _errors$ === void 0 ? void 0 : _errors$.username]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"form-control inputs-login\",\n              autoFocus: true,\n              id: \"validationServer03\",\n              placeholder: \"Username\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"invalid-feedback\",\n              children: [((_errors$2 = errors[0]) === null || _errors$2 === void 0 ? void 0 : _errors$2.username) || null, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"validationServer04\",\n              id: \"labels-login-password\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              className: \"form-control\",\n              id: \"validationServer04\",\n              placeholder: \"Password\",\n              min: 8,\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"invalid-feedback\",\n              children: [((_errors$3 = errors[0]) === null || _errors$3 === void 0 ? void 0 : _errors$3.password) || ((_errors$4 = errors[0]) === null || _errors$4 === void 0 ? void 0 : _errors$4.detail) || ((_errors$5 = errors[0]) === null || _errors$5 === void 0 ? void 0 : _errors$5.non_field_errors), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-grid gap-2 my-2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary btn-lg\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mx-auto\",\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/forgot-password\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"dont-account\",\n                  children: \"Did you forget your password?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/register\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"dont-account\",\n                  children: \"Don't have an account? register now!\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"h1QNb03785zXcLOzp/e9pSU4ES4=\");\n\n_c = Login;\nexport { Login };\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["lgApi","React","useContext","useState","addCache","Link","Navigate","AuthContext","Login","errors","setErrors","img","accessToken","setAccessToken","loginSubmit","e","preventDefault","url","method","headers","data","username","document","querySelector","value","password","withCredentials","then","access","refresh","window","localStorage","setItem","catch","err","response","target","classList","add","console","log","detail","non_field_errors"],"sources":["/home/nahuela/Desktop/projects/lazygram_react/src/components/users/Login.jsx"],"sourcesContent":["/* Login view from lazygram in react */\n\nimport { lgApi } from \"../../__modules__\";\nimport \"../../css/users/Login.css\";\nimport React, { useContext, useState } from \"react\";\nimport { addCache } from \"../../utils/users/cache\";\nimport { Link } from \"react-router-dom\";\nimport { Navigate } from \"react-router-dom\";\nimport AuthContext from \"../../context/AuthContext\";\nimport \"../../css/Margin.css\";\n\nconst Login = () => {\n  const [errors, setErrors] = useState([]);\n  const img = \"http://localhost:8000/media/logo_instagram.png\";\n  const { accessToken, setAccessToken } = useContext(AuthContext);\n\n  const loginSubmit = async (e) => {\n    e.preventDefault();\n\n    await lgApi({\n      url: \"accounts/login/\",\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n      data: {\n        username: document.querySelector(\"#validationServer03\").value,\n        password: document.querySelector(\"#validationServer04\").value,\n      },\n      withCredentials: true,\n    })\n      .then(({ data }) => {\n        // Set in localStorage the username from authenticated user.\n        addCache(\n          \"access_token\",\n          \"http://localhost:3000/access_token\",\n          data.access\n        );\n        addCache(\n          \"refresh_token\",\n          \"http://localhost:3000/refresh_token\",\n          data.refresh\n        );\n\n        window.localStorage.setItem(\"profile_auth\", data.username);\n        setAccessToken(data.access);\n      })\n      .catch((err) => {\n        setErrors([err.response.data]);\n        e.target[0].classList.add(\"is-invalid\");\n        e.target[1].classList.add(\"is-invalid\");\n      });\n\n    lgApi(\"https://lazygram-django.vercel.app/\")\n      .then(console.log)\n      .catch(console.log);\n  };\n\n  return accessToken ? (\n    <Navigate to={\"/\"} />\n  ) : (\n    <main>\n      <section className=\"login mt-3\">\n        <div className=\"logo\">\n          <img src={img} alt=\"copygram_logo\" />\n          <h1>Lazygram</h1>\n        </div>\n        <div className=\"container-form\">\n          <form\n            method=\"POST\"\n            className=\"needs-validation\"\n            noValidate\n            onSubmit={(e) => {\n              loginSubmit(e);\n            }}\n          >\n            <div className=\"container-form\">\n              {/* Username */}\n              <label htmlFor=\"validationServer03\" id=\"labels-login-username\">\n                Username{errors[0]?.username}\n              </label>\n              <input\n                type=\"text\"\n                className=\"form-control inputs-login\"\n                autoFocus\n                id=\"validationServer03\"\n                placeholder=\"Username\"\n                required\n              />\n              {\n                <div className=\"invalid-feedback\">\n                  {errors[0]?.username || null}{\" \"}\n                </div>\n              }\n\n              {/* Password */}\n              <label htmlFor=\"validationServer04\" id=\"labels-login-password\">\n                Password\n              </label>\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                id=\"validationServer04\"\n                placeholder=\"Password\"\n                min={8}\n                required\n              />\n              {\n                <div className=\"invalid-feedback\">\n                  {errors[0]?.password ||\n                    errors[0]?.detail ||\n                    errors[0]?.non_field_errors}{\" \"}\n                </div>\n              }\n\n              {/* Login submit */}\n              <div className=\"d-grid gap-2 my-2\">\n                <button type=\"submit\" className=\"btn btn-primary btn-lg\">\n                  Login\n                </button>\n              </div>\n              <div className=\"mx-auto\">\n                <Link to={\"/forgot-password\"}>\n                  <span className=\"dont-account\">\n                    Did you forget your password?\n                  </span>\n                </Link>\n                <br />\n                <Link to={\"/register\"}>\n                  <span className=\"dont-account\">\n                    Don't have an account? register now!\n                  </span>\n                </Link>\n              </div>\n            </div>\n          </form>\n        </div>\n      </section>\n    </main>\n  );\n};\n\nexport { Login };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}