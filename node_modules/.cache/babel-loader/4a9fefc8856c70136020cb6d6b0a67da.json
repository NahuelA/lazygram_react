{"ast":null,"code":"var _jsxFileName = \"/home/nahuela/Desktop/projects/lazygram_react/src/components/posts/CreatePost.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext } from \"react\";\nimport { lgApi } from \"../../__modules__\";\nimport { addInvalidCreatePost } from \"../../utils/users/profile\";\nimport AuthContext from \"../../context/AuthContext\";\nimport \"../../css/Margin.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CreatePost = () => {\n  _s();\n\n  const {\n    accessToken\n  } = useContext(AuthContext);\n  const profileAuth = window.localStorage.getItem(\"profile_auth\");\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    let postForm = new FormData();\n    let picture = document.querySelector(\"#id_picture\").files[0];\n    let description = document.querySelector(\"#id_description\").value; // Post image validation.\n\n    if (picture !== null) {\n      postForm.append(\"picture\", picture);\n    } // Description validation.\n\n\n    if (description !== null) {\n      postForm.append(\"description\", description);\n    }\n\n    postForm.append(\"username\", profileAuth);\n    await lgApi(\"posts/\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n        Authorization: \"Bearer \" + String(accessToken)\n      },\n      data: postForm\n    }).then(res => {\n      alert(\"Post created successfully!\");\n    }).catch(err => {\n      addInvalidCreatePost(err.response.data, e.target[0]);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"mt-3\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      method: \"post\",\n      encType: \"multipart/form-data\",\n      onSubmit: e => {\n        handleSubmit(e);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row w-50 mx-auto justify-content-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-control mb-2\",\n          id: \"id_picture\",\n          type: \"file\",\n          accept: \"image/png, image/jpeg image/jpg image/svg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form-control mb-2\",\n          id: \"id_description\",\n          type: \"text\",\n          placeholder: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"btn btn-primary\",\n          children: \"Submit post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CreatePost, \"fXMtSYRzMPk0Prf2ocsLHebGNas=\");\n\n_c = CreatePost;\nexport { CreatePost };\n\nvar _c;\n\n$RefreshReg$(_c, \"CreatePost\");","map":{"version":3,"names":["React","useContext","lgApi","addInvalidCreatePost","AuthContext","CreatePost","accessToken","profileAuth","window","localStorage","getItem","handleSubmit","e","preventDefault","postForm","FormData","picture","document","querySelector","files","description","value","append","method","headers","Authorization","String","data","then","res","alert","catch","err","response","target"],"sources":["/home/nahuela/Desktop/projects/lazygram_react/src/components/posts/CreatePost.jsx"],"sourcesContent":["import React, { useContext } from \"react\";\nimport { lgApi } from \"../../__modules__\";\nimport { addInvalidCreatePost } from \"../../utils/users/profile\";\nimport AuthContext from \"../../context/AuthContext\";\nimport \"../../css/Margin.css\";\n\nconst CreatePost = () => {\n  const { accessToken } = useContext(AuthContext);\n  const profileAuth = window.localStorage.getItem(\"profile_auth\");\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    let postForm = new FormData();\n    let picture = document.querySelector(\"#id_picture\").files[0];\n    let description = document.querySelector(\"#id_description\").value;\n\n    // Post image validation.\n    if (picture !== null) {\n      postForm.append(\"picture\", picture);\n    }\n\n    // Description validation.\n    if (description !== null) {\n      postForm.append(\"description\", description);\n    }\n\n    postForm.append(\"username\", profileAuth);\n\n    await lgApi(\"posts/\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n        Authorization: \"Bearer \" + String(accessToken),\n      },\n      data: postForm,\n    })\n      .then((res) => {\n        alert(\"Post created successfully!\");\n      })\n      .catch((err) => {\n        addInvalidCreatePost(err.response.data, e.target[0]);\n      });\n  };\n\n  return (\n    <section className=\"mt-3\">\n      <form\n        method=\"post\"\n        encType=\"multipart/form-data\"\n        onSubmit={(e) => {\n          handleSubmit(e);\n        }}\n      >\n        <div className=\"row w-50 mx-auto justify-content-center\">\n          <input\n            className=\"form-control mb-2\"\n            id=\"id_picture\"\n            type=\"file\"\n            accept=\"image/png, image/jpeg image/jpg image/svg\"\n          />\n          <input\n            className=\"form-control mb-2\"\n            id=\"id_description\"\n            type=\"text\"\n            placeholder=\"Description\"\n          />\n          <button type=\"submit\" className=\"btn btn-primary\">\n            Submit post\n          </button>\n        </div>\n      </form>\n    </section>\n  );\n};\n\nexport { CreatePost };\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,KAAT,QAAsB,mBAAtB;AACA,SAASC,oBAAT,QAAqC,2BAArC;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAO,sBAAP;;;AAEA,MAAMC,UAAU,GAAG,MAAM;EAAA;;EACvB,MAAM;IAAEC;EAAF,IAAkBL,UAAU,CAACG,WAAD,CAAlC;EACA,MAAMG,WAAW,GAAGC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAApB;;EAEA,MAAMC,YAAY,GAAG,MAAOC,CAAP,IAAa;IAChCA,CAAC,CAACC,cAAF;IACA,IAAIC,QAAQ,GAAG,IAAIC,QAAJ,EAAf;IACA,IAAIC,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,EAAsCC,KAAtC,CAA4C,CAA5C,CAAd;IACA,IAAIC,WAAW,GAAGH,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0CG,KAA5D,CAJgC,CAMhC;;IACA,IAAIL,OAAO,KAAK,IAAhB,EAAsB;MACpBF,QAAQ,CAACQ,MAAT,CAAgB,SAAhB,EAA2BN,OAA3B;IACD,CAT+B,CAWhC;;;IACA,IAAII,WAAW,KAAK,IAApB,EAA0B;MACxBN,QAAQ,CAACQ,MAAT,CAAgB,aAAhB,EAA+BF,WAA/B;IACD;;IAEDN,QAAQ,CAACQ,MAAT,CAAgB,UAAhB,EAA4Bf,WAA5B;IAEA,MAAML,KAAK,CAAC,QAAD,EAAW;MACpBqB,MAAM,EAAE,MADY;MAEpBC,OAAO,EAAE;QACP,gBAAgB,qBADT;QAEPC,aAAa,EAAE,YAAYC,MAAM,CAACpB,WAAD;MAF1B,CAFW;MAMpBqB,IAAI,EAAEb;IANc,CAAX,CAAL,CAQHc,IARG,CAQGC,GAAD,IAAS;MACbC,KAAK,CAAC,4BAAD,CAAL;IACD,CAVG,EAWHC,KAXG,CAWIC,GAAD,IAAS;MACd7B,oBAAoB,CAAC6B,GAAG,CAACC,QAAJ,CAAaN,IAAd,EAAoBf,CAAC,CAACsB,MAAF,CAAS,CAAT,CAApB,CAApB;IACD,CAbG,CAAN;EAcD,CAhCD;;EAkCA,oBACE;IAAS,SAAS,EAAC,MAAnB;IAAA,uBACE;MACE,MAAM,EAAC,MADT;MAEE,OAAO,EAAC,qBAFV;MAGE,QAAQ,EAAGtB,CAAD,IAAO;QACfD,YAAY,CAACC,CAAD,CAAZ;MACD,CALH;MAAA,uBAOE;QAAK,SAAS,EAAC,yCAAf;QAAA,wBACE;UACE,SAAS,EAAC,mBADZ;UAEE,EAAE,EAAC,YAFL;UAGE,IAAI,EAAC,MAHP;UAIE,MAAM,EAAC;QAJT;UAAA;UAAA;UAAA;QAAA,QADF,eAOE;UACE,SAAS,EAAC,mBADZ;UAEE,EAAE,EAAC,gBAFL;UAGE,IAAI,EAAC,MAHP;UAIE,WAAW,EAAC;QAJd;UAAA;UAAA;UAAA;QAAA,QAPF,eAaE;UAAQ,IAAI,EAAC,QAAb;UAAsB,SAAS,EAAC,iBAAhC;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAbF;MAAA;QAAA;QAAA;QAAA;MAAA;IAPF;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AA6BD,CAnED;;GAAMP,U;;KAAAA,U;AAqEN,SAASA,UAAT"},"metadata":{},"sourceType":"module"}