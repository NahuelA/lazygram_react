{"ast":null,"code":"var _jsxFileName = \"/home/nahuela/Desktop/projects/lazygram_react/src/components/users/ForgotPasswordValidation.jsx\",\n    _s = $RefreshSig$();\n\n/* Forgot password validation */\nimport { lgApi, addInvalidToken } from \"../../__modules__\";\nimport \"../../css/ActiveAccount.css\";\nimport { useNavigate } from \"react-router\";\nimport { addCache } from \"../../utils/users/cache\";\nimport { useContext } from \"react\";\nimport AuthContext from \"../../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ForgotPasswordValidation = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    setAccessToken\n  } = useContext(AuthContext);\n\n  async function handleSubmit(e) {\n    e.preventDefault(); // Get access token\n\n    let access = new FormData();\n    const accessInput = document.querySelector(\"#id_access_token\");\n    const accessToken = document.querySelector(\"#id_access_token\").value; // Access token field\n\n    if (accessToken !== undefined) {\n      access.append(\"access\", accessToken);\n    }\n\n    await lgApi(\"accounts/forgot-password-validation\", {\n      method: \"post\",\n      data: access\n    }).then(res => {\n      console.log(res);\n      addCache(\"access_token\", \"http://localhost:3000/access_token\", res.data);\n      setAccessToken(res.data);\n      navigate(\"../set-new-password\", {\n        relative: \"path\"\n      });\n    }).catch(err => {\n      addInvalidToken(accessInput, err.response.data.detail || err.response.data);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-25 position mx-auto mt-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"h2 text-center\",\n      children: \"Enter your token to change password:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      method: \"post\",\n      onSubmit: e => {\n        handleSubmit(e);\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        maxLength: \"228\",\n        minLength: \"8\",\n        id: \"id_access_token\",\n        placeholder: \"Your token\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        className: \"btn btn-primary col\",\n        id: \"submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ForgotPasswordValidation, \"5Y1jNvK3O0UDm+LhLXaqGTkvMGg=\", false, function () {\n  return [useNavigate];\n});\n\n_c = ForgotPasswordValidation;\nexport { ForgotPasswordValidation };\n\nvar _c;\n\n$RefreshReg$(_c, \"ForgotPasswordValidation\");","map":{"version":3,"names":["lgApi","addInvalidToken","useNavigate","addCache","useContext","AuthContext","ForgotPasswordValidation","navigate","setAccessToken","handleSubmit","e","preventDefault","access","FormData","accessInput","document","querySelector","accessToken","value","undefined","append","method","data","then","res","console","log","relative","catch","err","response","detail"],"sources":["/home/nahuela/Desktop/projects/lazygram_react/src/components/users/ForgotPasswordValidation.jsx"],"sourcesContent":["/* Forgot password validation */\n\nimport { lgApi, addInvalidToken } from \"../../__modules__\";\nimport \"../../css/ActiveAccount.css\";\nimport { useNavigate } from \"react-router\";\nimport { addCache } from \"../../utils/users/cache\";\nimport { useContext } from \"react\";\nimport AuthContext from \"../../context/AuthContext\";\n\nconst ForgotPasswordValidation = () => {\n  const navigate = useNavigate();\n  const { setAccessToken } = useContext(AuthContext);\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    // Get access token\n    let access = new FormData();\n    const accessInput = document.querySelector(\"#id_access_token\");\n    const accessToken = document.querySelector(\"#id_access_token\").value;\n\n    // Access token field\n    if (accessToken !== undefined) {\n      access.append(\"access\", accessToken);\n    }\n\n    await lgApi(\"accounts/forgot-password-validation\", {\n      method: \"post\",\n      data: access,\n    })\n      .then((res) => {\n        console.log(res);\n        addCache(\n          \"access_token\",\n          \"http://localhost:3000/access_token\",\n          res.data\n        );\n        setAccessToken(res.data);\n        navigate(\"../set-new-password\", { relative: \"path\" });\n      })\n      .catch((err) => {\n        addInvalidToken(\n          accessInput,\n          err.response.data.detail || err.response.data\n        );\n      });\n  }\n\n  return (\n    <div className=\"w-25 position mx-auto mt-3\">\n      <h2 className=\"h2 text-center\">Enter your token to change password:</h2>\n\n      <form\n        method=\"post\"\n        onSubmit={(e) => {\n          handleSubmit(e);\n        }}\n      >\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          maxLength=\"228\"\n          minLength=\"8\"\n          id=\"id_access_token\"\n          placeholder=\"Your token\"\n          required\n        />\n        <input type=\"submit\" className=\"btn btn-primary col\" id=\"submit\" />\n      </form>\n    </div>\n  );\n};\n\nexport { ForgotPasswordValidation };\n"],"mappings":";;;AAAA;AAEA,SAASA,KAAT,EAAgBC,eAAhB,QAAuC,mBAAvC;AACA,OAAO,6BAAP;AACA,SAASC,WAAT,QAA4B,cAA5B;AACA,SAASC,QAAT,QAAyB,yBAAzB;AACA,SAASC,UAAT,QAA2B,OAA3B;AACA,OAAOC,WAAP,MAAwB,2BAAxB;;;AAEA,MAAMC,wBAAwB,GAAG,MAAM;EAAA;;EACrC,MAAMC,QAAQ,GAAGL,WAAW,EAA5B;EACA,MAAM;IAAEM;EAAF,IAAqBJ,UAAU,CAACC,WAAD,CAArC;;EAEA,eAAeI,YAAf,CAA4BC,CAA5B,EAA+B;IAC7BA,CAAC,CAACC,cAAF,GAD6B,CAE7B;;IACA,IAAIC,MAAM,GAAG,IAAIC,QAAJ,EAAb;IACA,MAAMC,WAAW,GAAGC,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAApB;IACA,MAAMC,WAAW,GAAGF,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,EAA2CE,KAA/D,CAL6B,CAO7B;;IACA,IAAID,WAAW,KAAKE,SAApB,EAA+B;MAC7BP,MAAM,CAACQ,MAAP,CAAc,QAAd,EAAwBH,WAAxB;IACD;;IAED,MAAMjB,KAAK,CAAC,qCAAD,EAAwC;MACjDqB,MAAM,EAAE,MADyC;MAEjDC,IAAI,EAAEV;IAF2C,CAAxC,CAAL,CAIHW,IAJG,CAIGC,GAAD,IAAS;MACbC,OAAO,CAACC,GAAR,CAAYF,GAAZ;MACArB,QAAQ,CACN,cADM,EAEN,oCAFM,EAGNqB,GAAG,CAACF,IAHE,CAAR;MAKAd,cAAc,CAACgB,GAAG,CAACF,IAAL,CAAd;MACAf,QAAQ,CAAC,qBAAD,EAAwB;QAAEoB,QAAQ,EAAE;MAAZ,CAAxB,CAAR;IACD,CAbG,EAcHC,KAdG,CAcIC,GAAD,IAAS;MACd5B,eAAe,CACba,WADa,EAEbe,GAAG,CAACC,QAAJ,CAAaR,IAAb,CAAkBS,MAAlB,IAA4BF,GAAG,CAACC,QAAJ,CAAaR,IAF5B,CAAf;IAID,CAnBG,CAAN;EAoBD;;EAED,oBACE;IAAK,SAAS,EAAC,4BAAf;IAAA,wBACE;MAAI,SAAS,EAAC,gBAAd;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAGE;MACE,MAAM,EAAC,MADT;MAEE,QAAQ,EAAGZ,CAAD,IAAO;QACfD,YAAY,CAACC,CAAD,CAAZ;MACD,CAJH;MAAA,wBAME;QACE,IAAI,EAAC,MADP;QAEE,SAAS,EAAC,cAFZ;QAGE,SAAS,EAAC,KAHZ;QAIE,SAAS,EAAC,GAJZ;QAKE,EAAE,EAAC,iBALL;QAME,WAAW,EAAC,YANd;QAOE,QAAQ;MAPV;QAAA;QAAA;QAAA;MAAA,QANF,eAeE;QAAO,IAAI,EAAC,QAAZ;QAAqB,SAAS,EAAC,qBAA/B;QAAqD,EAAE,EAAC;MAAxD;QAAA;QAAA;QAAA;MAAA,QAfF;IAAA;MAAA;MAAA;MAAA;IAAA,QAHF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAuBD,CA7DD;;GAAMJ,wB;UACaJ,W;;;KADbI,wB;AA+DN,SAASA,wBAAT"},"metadata":{},"sourceType":"module"}