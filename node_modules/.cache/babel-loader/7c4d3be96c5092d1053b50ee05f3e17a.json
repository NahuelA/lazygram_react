{"ast":null,"code":"var _jsxFileName = \"/home/nahuela/ADesk/my_projects/lazygram_react/lazygram/src/apps/posts/CreatePost.js\";\nimport React from \"react\";\nimport { lg_api } from \"../../__modules__\";\nimport { addInvalidCreatePost } from \"../../utils/users/profile\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass CreatePost extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      post: []\n    };\n    this.token = window.localStorage.getItem(\"token\");\n    this.profile_auth = window.localStorage.getItem(\"profile_auth\"); // Methods\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    console.log(e);\n    let form_post = new FormData();\n    let picture = document.querySelector(\"#id_picture\").files[0];\n    let description = document.querySelector(\"#id_description\").value; // Post image validation.\n\n    if (picture !== null) {\n      form_post.append(\"picture\", picture);\n    } // Description validation.\n\n\n    if (description !== null) {\n      form_post.append(\"description\", description);\n    }\n\n    form_post.append(\"auth_profile\", this.profile_auth);\n    lg_api(\"posts/\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n        Authorization: `Token ${this.token}`\n      },\n      data: form_post\n    }).then(res => {\n      window.location.hash = \"#\";\n    }).catch(err => {\n      addInvalidCreatePost(err.response.data, e.target[0]);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"mt-5\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        method: \"post\",\n        encType: \"multipart/form-data\",\n        onSubmit: e => {\n          this.handleSubmit(e);\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row w-50 mx-auto justify-content-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control mb-2\",\n            id: \"id_picture\",\n            type: \"file\",\n            accept: \"image/png, image/jpeg image/jpg image/svg\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control mb-2\",\n            id: \"id_description\",\n            type: \"text\",\n            placeholder: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            children: \"Submit post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport { CreatePost };","map":{"version":3,"names":["React","lg_api","addInvalidCreatePost","CreatePost","Component","constructor","state","post","token","window","localStorage","getItem","profile_auth","handleSubmit","bind","e","preventDefault","console","log","form_post","FormData","picture","document","querySelector","files","description","value","append","method","headers","Authorization","data","then","res","location","hash","catch","err","response","target","render"],"sources":["/home/nahuela/ADesk/my_projects/lazygram_react/lazygram/src/apps/posts/CreatePost.js"],"sourcesContent":["import React from \"react\";\nimport { lg_api } from \"../../__modules__\";\nimport { addInvalidCreatePost } from \"../../utils/users/profile\";\n\nclass CreatePost extends React.Component {\n  constructor() {\n    super();\n    this.state = { post: [] };\n    this.token = window.localStorage.getItem(\"token\");\n    this.profile_auth = window.localStorage.getItem(\"profile_auth\");\n\n    // Methods\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    console.log(e);\n    let form_post = new FormData();\n    let picture = document.querySelector(\"#id_picture\").files[0];\n    let description = document.querySelector(\"#id_description\").value;\n\n    // Post image validation.\n    if (picture !== null) {\n      form_post.append(\"picture\", picture);\n    }\n\n    // Description validation.\n    if (description !== null) {\n      form_post.append(\"description\", description);\n    }\n    form_post.append(\"auth_profile\", this.profile_auth);\n\n    lg_api(\"posts/\", {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n        Authorization: `Token ${this.token}`,\n      },\n      data: form_post,\n    })\n      .then((res) => {\n        window.location.hash = \"#\";\n      })\n      .catch((err) => {\n        addInvalidCreatePost(err.response.data, e.target[0]);\n      });\n  }\n\n  render() {\n    return (\n      <section className=\"mt-5\">\n        <form\n          method=\"post\"\n          encType=\"multipart/form-data\"\n          onSubmit={(e) => {\n            this.handleSubmit(e);\n          }}\n        >\n          <div className=\"row w-50 mx-auto justify-content-center\">\n            <input\n              className=\"form-control mb-2\"\n              id=\"id_picture\"\n              type=\"file\"\n              accept=\"image/png, image/jpeg image/jpg image/svg\"\n            />\n            <input\n              className=\"form-control mb-2\"\n              id=\"id_description\"\n              type=\"text\"\n              placeholder=\"Description\"\n            />\n            <button type=\"submit\" className=\"btn btn-primary\">\n              Submit post\n            </button>\n          </div>\n        </form>\n      </section>\n    );\n  }\n}\n\nexport { CreatePost };\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,oBAAT,QAAqC,2BAArC;;;AAEA,MAAMC,UAAN,SAAyBH,KAAK,CAACI,SAA/B,CAAyC;EACvCC,WAAW,GAAG;IACZ;IACA,KAAKC,KAAL,GAAa;MAAEC,IAAI,EAAE;IAAR,CAAb;IACA,KAAKC,KAAL,GAAaC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,OAA5B,CAAb;IACA,KAAKC,YAAL,GAAoBH,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,cAA5B,CAApB,CAJY,CAMZ;;IACA,KAAKE,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;EACD;;EAEDD,YAAY,CAACE,CAAD,EAAI;IACdA,CAAC,CAACC,cAAF;IACAC,OAAO,CAACC,GAAR,CAAYH,CAAZ;IACA,IAAII,SAAS,GAAG,IAAIC,QAAJ,EAAhB;IACA,IAAIC,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,EAAsCC,KAAtC,CAA4C,CAA5C,CAAd;IACA,IAAIC,WAAW,GAAGH,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,EAA0CG,KAA5D,CALc,CAOd;;IACA,IAAIL,OAAO,KAAK,IAAhB,EAAsB;MACpBF,SAAS,CAACQ,MAAV,CAAiB,SAAjB,EAA4BN,OAA5B;IACD,CAVa,CAYd;;;IACA,IAAII,WAAW,KAAK,IAApB,EAA0B;MACxBN,SAAS,CAACQ,MAAV,CAAiB,aAAjB,EAAgCF,WAAhC;IACD;;IACDN,SAAS,CAACQ,MAAV,CAAiB,cAAjB,EAAiC,KAAKf,YAAtC;IAEAX,MAAM,CAAC,QAAD,EAAW;MACf2B,MAAM,EAAE,MADO;MAEfC,OAAO,EAAE;QACP,gBAAgB,qBADT;QAEPC,aAAa,EAAG,SAAQ,KAAKtB,KAAM;MAF5B,CAFM;MAMfuB,IAAI,EAAEZ;IANS,CAAX,CAAN,CAQGa,IARH,CAQSC,GAAD,IAAS;MACbxB,MAAM,CAACyB,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;IACD,CAVH,EAWGC,KAXH,CAWUC,GAAD,IAAS;MACdnC,oBAAoB,CAACmC,GAAG,CAACC,QAAJ,CAAaP,IAAd,EAAoBhB,CAAC,CAACwB,MAAF,CAAS,CAAT,CAApB,CAApB;IACD,CAbH;EAcD;;EAEDC,MAAM,GAAG;IACP,oBACE;MAAS,SAAS,EAAC,MAAnB;MAAA,uBACE;QACE,MAAM,EAAC,MADT;QAEE,OAAO,EAAC,qBAFV;QAGE,QAAQ,EAAGzB,CAAD,IAAO;UACf,KAAKF,YAAL,CAAkBE,CAAlB;QACD,CALH;QAAA,uBAOE;UAAK,SAAS,EAAC,yCAAf;UAAA,wBACE;YACE,SAAS,EAAC,mBADZ;YAEE,EAAE,EAAC,YAFL;YAGE,IAAI,EAAC,MAHP;YAIE,MAAM,EAAC;UAJT;YAAA;YAAA;YAAA;UAAA,QADF,eAOE;YACE,SAAS,EAAC,mBADZ;YAEE,EAAE,EAAC,gBAFL;YAGE,IAAI,EAAC,MAHP;YAIE,WAAW,EAAC;UAJd;YAAA;YAAA;YAAA;UAAA,QAPF,eAaE;YAAQ,IAAI,EAAC,QAAb;YAAsB,SAAS,EAAC,iBAAhC;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAbF;QAAA;UAAA;UAAA;UAAA;QAAA;MAPF;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADF;EA6BD;;AA3EsC;;AA8EzC,SAASZ,UAAT"},"metadata":{},"sourceType":"module"}