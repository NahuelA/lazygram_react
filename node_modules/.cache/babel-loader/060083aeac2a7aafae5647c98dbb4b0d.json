{"ast":null,"code":"import { lg_api } from \"../../__modules__\";\n\nasync function likePost(e) {\n  if (String(e.nativeEvent.path[1].id).startsWith(\"likes_post\")) {\n    console.log(e.target.parentElement.id.split(\"\").length);\n    let url = `posts/${e.nativeEvent.path[4].id}/`;\n    let token = window.localStorage.getItem(\"token\");\n    let likesComponent = document.querySelector(`#id_likes_${e.nativeEvent.path[4].id}`); // await lg_api(url, {\n    //   method: \"put\",\n    //   headers: {\n    //     Authorization: `Token ${token}`,\n    //   },\n    // })\n    //   .then((res) => {\n    //     likesComponent.innerHTML = `${res.data.likes} Likes`;\n    //     console.log(res.data);\n    //   })\n    //   .catch((err) => {\n    //     console.log(err.response.data);\n    //   });\n  }\n}\n/**\n * Send comments.\n * @param {*} e\n */\n\n\nasync function commentPost(e, newComment) {\n  try {\n    let form_comment = new FormData();\n    let postid = e.path[2].id;\n    let token = window.localStorage.getItem(\"token\"); // Post ID validation.\n\n    if (postid !== null) {\n      form_comment.append(\"post\", postid);\n    } // Comment validation.\n\n\n    if (newComment !== null) {\n      form_comment.append(\"comment\", newComment);\n    } // Put comments.\n\n\n    lg_api(`comments/`, {\n      method: \"post\",\n      headers: {\n        Authorization: `Token ${token}`\n      },\n      data: form_comment\n    }).then(res => {\n      console.log(res.data);\n    }).catch(err => {\n      console.log(err.response.data);\n    });\n  } catch (err) {\n    alert(err.name, err.message);\n    console.log(err.message);\n  }\n}\n/**\n * Input component from comment.\n * @param {*} id_comment\n * @returns\n */\n\n\nfunction inputComment(id_comment) {\n  let commentComponent = document.createElement(\"div\");\n  let inputComponent = document.createElement(\"input\");\n  let btnComponent = document.createElement(\"button\"); // Comment\n\n  commentComponent.classList = \"row rounded-pill border border-2\"; // Input\n\n  inputComponent.classList = \"input-cmt border-0 col-sm-10\";\n  inputComponent.id = `${id_comment}_inp`; // Send button\n\n  btnComponent.classList = \"btn btn-outline-primary text-center col-sm rounded-pill\";\n  btnComponent.innerHTML = \"Send\";\n  commentComponent.append(inputComponent, btnComponent);\n  btnComponent.addEventListener(\"click\", e => {\n    let inputCommentValue = document.querySelector(`#${id_comment}_inp`).value;\n    commentPost(e, inputCommentValue);\n  });\n  return commentComponent;\n}\n/**\n * Reply comments.\n * @param {*} e\n */\n\n\nasync function replyComment(e) {\n  if (String(e.nativeEvent.path[1].id).startsWith(\"comments_post\")) {\n    try {\n      let token = window.localStorage.getItem(\"token\");\n      let replied_by = window.localStorage.getItem(\"profile_auth\");\n      let form_comment = new FormData();\n      let len = e.target.parentElement.id.split(\"\").length;\n      let commentid = parseInt(e.target.parentElement.id.split(\"\")[len - 1]);\n      console.log(\"Comment\");\n      let reply = e.target.value; // Comment id validation.\n\n      if (commentid !== null) {\n        form_comment.append(\"commentid\", commentid);\n      } // Replied by validation.\n\n\n      if (replied_by !== null) {\n        form_comment.append(\"replied_by\", replied_by);\n      } // Reply validation.\n\n\n      if (reply !== null) {\n        form_comment.append(\"reply\", reply);\n      } // Put comments.\n\n\n      lg_api(`replies/`, {\n        method: \"put\",\n        headers: {\n          Authorization: `Token ${token}`\n        },\n        data: form_comment\n      }).then(res => {\n        console.log(res.data);\n      }).catch(err => {\n        console.log(err.response.data);\n      });\n    } catch (err) {\n      alert(err.name, err.message);\n      console.log(err.message);\n    }\n  }\n}\n\nasync function likeComment(e) {// if (likes !== null) {\n  //   form_comment.append(\"likes\", likes);\n  // }\n} // Components\n\n\nexport { inputComment }; // Utils\n\nexport { likePost, commentPost, replyComment, likeComment };","map":{"version":3,"names":["lg_api","likePost","e","String","nativeEvent","path","id","startsWith","console","log","target","parentElement","split","length","url","token","window","localStorage","getItem","likesComponent","document","querySelector","commentPost","newComment","form_comment","FormData","postid","append","method","headers","Authorization","data","then","res","catch","err","response","alert","name","message","inputComment","id_comment","commentComponent","createElement","inputComponent","btnComponent","classList","innerHTML","addEventListener","inputCommentValue","value","replyComment","replied_by","len","commentid","parseInt","reply","likeComment"],"sources":["/home/nahuela/ADesk/my_projects/lazygram_django/staticfiles/lazygram_app/src/utils/posts/posts.js"],"sourcesContent":["import { lg_api } from \"../../__modules__\";\n\nasync function likePost(e) {\n  if (String(e.nativeEvent.path[1].id).startsWith(\"likes_post\")) {\n    console.log(e.target.parentElement.id.split(\"\").length)\n    let url = `posts/${e.nativeEvent.path[4].id}/`;\n    let token = window.localStorage.getItem(\"token\");\n    let likesComponent = document.querySelector(\n      `#id_likes_${e.nativeEvent.path[4].id}`\n    );\n\n    // await lg_api(url, {\n    //   method: \"put\",\n    //   headers: {\n    //     Authorization: `Token ${token}`,\n    //   },\n    // })\n    //   .then((res) => {\n    //     likesComponent.innerHTML = `${res.data.likes} Likes`;\n    //     console.log(res.data);\n    //   })\n    //   .catch((err) => {\n    //     console.log(err.response.data);\n    //   });\n  }\n}\n\n/**\n * Send comments.\n * @param {*} e\n */\nasync function commentPost(e, newComment) {\n  try {\n    let form_comment = new FormData();\n    let postid = e.path[2].id;\n    let token = window.localStorage.getItem(\"token\");\n\n    // Post ID validation.\n    if (postid !== null) {\n      form_comment.append(\"post\", postid);\n    }\n\n    // Comment validation.\n    if (newComment !== null) {\n      form_comment.append(\"comment\", newComment);\n    }\n\n    // Put comments.\n    lg_api(`comments/`, {\n      method: \"post\",\n      headers: {\n        Authorization: `Token ${token}`,\n      },\n      data: form_comment,\n    })\n      .then((res) => {\n        console.log(res.data);\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n      });\n  } catch (err) {\n    alert(err.name, err.message);\n    console.log(err.message);\n  }\n}\n\n/**\n * Input component from comment.\n * @param {*} id_comment\n * @returns\n */\nfunction inputComment(id_comment) {\n  let commentComponent = document.createElement(\"div\");\n  let inputComponent = document.createElement(\"input\");\n  let btnComponent = document.createElement(\"button\");\n\n  // Comment\n  commentComponent.classList = \"row rounded-pill border border-2\";\n\n  // Input\n  inputComponent.classList = \"input-cmt border-0 col-sm-10\";\n  inputComponent.id = `${id_comment}_inp`;\n\n  // Send button\n  btnComponent.classList =\n    \"btn btn-outline-primary text-center col-sm rounded-pill\";\n  btnComponent.innerHTML = \"Send\";\n  commentComponent.append(inputComponent, btnComponent);\n  btnComponent.addEventListener(\"click\", (e) => {\n    let inputCommentValue = document.querySelector(`#${id_comment}_inp`).value;\n    commentPost(e, inputCommentValue);\n  });\n\n  return commentComponent;\n}\n\n/**\n * Reply comments.\n * @param {*} e\n */\nasync function replyComment(e) {\n  if (String(e.nativeEvent.path[1].id).startsWith(\"comments_post\")) {\n    try {\n      let token = window.localStorage.getItem(\"token\");\n      let replied_by = window.localStorage.getItem(\"profile_auth\");\n      let form_comment = new FormData();\n      let len = e.target.parentElement.id.split(\"\").length;\n      let commentid = parseInt(e.target.parentElement.id.split(\"\")[len - 1]);\n      console.log(\"Comment\");\n\n      let reply = e.target.value;\n\n      // Comment id validation.\n      if (commentid !== null) {\n        form_comment.append(\"commentid\", commentid);\n      }\n\n      // Replied by validation.\n      if (replied_by !== null) {\n        form_comment.append(\"replied_by\", replied_by);\n      }\n\n      // Reply validation.\n      if (reply !== null) {\n        form_comment.append(\"reply\", reply);\n      }\n\n      // Put comments.\n      lg_api(`replies/`, {\n        method: \"put\",\n        headers: {\n          Authorization: `Token ${token}`,\n        },\n        data: form_comment,\n      })\n        .then((res) => {\n          console.log(res.data);\n        })\n        .catch((err) => {\n          console.log(err.response.data);\n        });\n    } catch (err) {\n      alert(err.name, err.message);\n      console.log(err.message);\n    }\n  }\n}\n\nasync function likeComment(e) {\n  // if (likes !== null) {\n  //   form_comment.append(\"likes\", likes);\n  // }\n}\n\n// Components\nexport { inputComment };\n\n// Utils\nexport { likePost, commentPost, replyComment, likeComment };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}